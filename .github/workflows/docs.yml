# This is V1.0.0 of RSP AI Native SDLC Framework

name: Documentation

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]
  workflow_dispatch: # Allow manual trigger

permissions:
  contents: read
  pull-requests: read

jobs:
  check-links:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v6

      - name: Check Markdown links
        uses: gaurav-nelson/github-action-markdown-link-check@v1
        with:
          use-quiet-mode: 'yes'
          config-file: '.github/markdown-link-check-config.json'

  lint-markdown:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v6

      - name: Lint Markdown files
        uses: articulate/actions-markdownlint@v1
        with:
          config: .markdownlint.json
          files: '**/*.md'
          ignore: node_modules

  validate-structure:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v6

      - name: Validate directory structure
        run: |
          echo "Checking required directories..."
          required_dirs=(
            "docs/00-getting-started"
            "docs/01-introduction"
            "docs/02-framework"
            "docs/03-patterns"
            "docs/04-practices"
            "docs/05-reference"
            "templates/prompts"
            "templates/workflows"
            "templates/documentation"
            "templates/checklists"
            "examples"
            "tools"
            "research"
          )

          missing=0
          for dir in "${required_dirs[@]}"; do
            if [ ! -d "$dir" ]; then
              echo "❌ Missing directory: $dir"
              missing=$((missing + 1))
            else
              echo "✅ Found: $dir"
            fi
          done

          if [ $missing -gt 0 ]; then
            echo ""
            echo "❌ $missing required directories are missing"
            exit 1
          else
            echo ""
            echo "✅ All required directories present"
          fi
