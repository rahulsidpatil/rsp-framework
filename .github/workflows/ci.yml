# This is V1.0.0 of RSP AI Native SDLC Framework

name: CI

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]
  workflow_dispatch:

permissions:
  contents: read
  pull-requests: read

jobs:
  # Simple job to verify workflow is running
  verify:
    name: Verify Setup
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Verify repository structure
        run: |
          echo "✅ Workflow is running successfully!"
          echo ""
          echo "Repository root files:"
          ls -la
          echo ""
          echo "Checking key directories exist..."
          test -d .github && echo "✅ .github/" || echo "❌ .github/"
          test -d docs && echo "✅ docs/" || echo "❌ docs/"
          test -d templates && echo "✅ templates/" || echo "❌ templates/"
          test -d examples && echo "✅ examples/" || echo "❌ examples/"
          test -d tools && echo "✅ tools/" || echo "❌ tools/"
          test -d research && echo "✅ research/" || echo "❌ research/"

  # Check all markdown files for basic issues
  markdown-check:
    name: Check Markdown
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Count markdown files
        run: |
          echo "Markdown files in repository:"
          find . -name "*.md" -type f | grep -v node_modules | wc -l
          echo ""
          echo "Sample files:"
          find . -name "*.md" -type f | grep -v node_modules | head -10

      - name: Check for required files
        run: |
          echo "Checking for required root files..."
          test -f README.md && echo "✅ README.md" || (echo "❌ README.md" && exit 1)
          test -f LICENSE && echo "✅ LICENSE" || echo "⚠️  LICENSE"
          test -f CONTRIBUTING.md && echo "✅ CONTRIBUTING.md" || echo "⚠️  CONTRIBUTING.md"
          test -f CHANGELOG.md && echo "✅ CHANGELOG.md" || echo "⚠️  CHANGELOG.md"
